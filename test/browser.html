<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Tweakpane Value Pairs Plugin Test</title>
</head>
<body>
	<script type="module">
		import {Pane} from '../node_modules/tweakpane/dist/tweakpane.min.js';
		import * as TweakpaneTemplatePlugin from '../dist/tweakpane-plugin-template.js';

		const params = {
			// Original template plugin example
			dotValue: 3,
			
			// Value pairs plugin examples with default property names
			coordinates: [
				{first: 10, second: 20},
				{first: 30, second: 40},
			],
			
			positions: [
				{first: 0, second: 0},
				{first: 100, second: 150},
				{first: 200, second: 75},
			],
			
			// Custom property names examples
			sizes: [
				{width: 100, height: 200},
				{width: 50, height: 75},
			],
			
			colors: [
				{red: 255, blue: 128},
				{red: 64, blue: 200},
			],
			
			// Empty list example
			emptyList: [],
		};

		const pane = new Pane();
		// Register plugin bundle
		pane.registerPlugin(TweakpaneTemplatePlugin);

		// Original dots plugin
		const folder1 = pane.addFolder({title: 'Original Dots Plugin', expanded: true});
		folder1.addBinding(params, 'dotValue', {
			view: 'dots',
		}).on('change', (ev) => {
			console.log('Dots changed:', ev.value);
		});

		// Value pairs plugin examples using native folders
		const folder2 = pane.addFolder({title: 'Value Pairs with Default Names', expanded: true});
		
		// Create individual folders for each pair list
		const coordFolder = folder2.addFolder({title: 'Coordinates (X,Y)', expanded: true});
		coordFolder.addBinding(params, 'coordinates', {
			view: 'valuepairs',
			firstLabel: 'X',
			secondLabel: 'Y',
		}).on('change', (ev) => {
			console.log('Coordinates changed:', ev.value);
		});

		const posFolder = folder2.addFolder({title: 'Positions (Width/Height)', expanded: true});
		posFolder.addBinding(params, 'positions', {
			view: 'valuepairs',
			firstLabel: 'Width', 
			secondLabel: 'Height',
			defaultFirst: 50,
			defaultSecond: 50,
			// Add constraint examples
			min: 0,
			max: 500,
			step: 5,
		}).on('change', (ev) => {
			console.log('Positions changed:', ev.value);
		});

		// Custom property names examples
		const folder3 = pane.addFolder({title: 'Value Pairs with Custom Property Names', expanded: true});
		
		const sizesFolder = folder3.addFolder({title: 'Sizes (width/height)', expanded: true});
		sizesFolder.addBinding(params, 'sizes', {
			view: 'valuepairs',
			firstProperty: 'width',
			secondProperty: 'height',
			// Labels will default to property names if not specified
			defaultFirst: 100,
			defaultSecond: 100,
			min: 10,
			max: 1000,
			step: 10,
		}).on('change', (ev) => {
			console.log('Sizes changed:', ev.value);
		});

		const colorsFolder = folder3.addFolder({title: 'Colors (red/blue)', expanded: true});
		colorsFolder.addBinding(params, 'colors', {
			view: 'valuepairs',
			firstProperty: 'red',
			secondProperty: 'blue',
			firstLabel: 'Red Channel',
			secondLabel: 'Blue Channel',
			defaultFirst: 128,
			defaultSecond: 128,
			// Different constraints per dimension using custom property names
			red: {
				min: 0,
				max: 255,
				step: 1,
			},
			blue: {
				min: 0,
				max: 255, 
				step: 1,
			},
		}).on('change', (ev) => {
			console.log('Colors changed:', ev.value);
		});

		const rangeFolder = folder2.addFolder({title: 'Ranges (with constraints)', expanded: false});
		rangeFolder.addBinding(params, 'emptyList', {
			view: 'valuepairs',
			firstLabel: 'Min',
			secondLabel: 'Max',
			defaultFirst: 0,
			defaultSecond: 100,
			// Different constraints per dimension
			first: {
				min: -50,
				max: 50,
				step: 0.1,
			},
			second: {
				min: 0,
				max: 200,
				step: 1,
			},
		}).on('change', (ev) => {
			console.log('Ranges changed:', ev.value);
		});

		console.log('Initial params:', params);
	</script>
</body>
</html>